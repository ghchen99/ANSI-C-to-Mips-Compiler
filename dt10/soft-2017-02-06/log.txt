Note that each submission has not been looked at manually, they
have only been randomly sampled to get an idea if the test automation.
is working for most submission. If the build system appears
to be broken, please raise an issue (though stability of these
runs is not a huge priority).

zl6114 : Cloning repo
Cloning into 'zl6114'...
zl6114 : Fetching repo
zl6114 : Checking out branch soft-2017-02-06 if it exists...
error: pathspec 'soft-2017-02-06' did not match any file(s) known to git.
zl6114 : Checking out specified hash and creating new branch soft-2017-02-06
Switched to a new branch 'soft-2017-02-06'
Already on 'soft-2017-02-06'
zl6114 : Checking we're on the right hash b8147f8c437f88d0581d671cc7fb803e0017b7b1...
cd tmp/$U && git rev-parse $RUN

log_msg "########################################################"
zl6114 : ########################################################
log_msg "## Building"
zl6114 : ## Building

log_msg "Cleaning"
zl6114 : Cleaning
(cd $REPO && rm bin/c_lexer)
(cd $REPO && make clean)
make: *** No rule to make target 'clean'.  Stop.

log_msg "Building"
zl6114 : Building
(cd $REPO && make bin/c_lexer)
flex -o lexer/c_lexer.yy.cpp lexer/c_lexer.flex
g++ -W -Wall -g -std=gnu++11 -o bin/c_lexer lexer/c_lexer.yy.cpp lexer/c_lexer_main.cpp
lexer/c_lexer.yy.cpp: In function ‘int yy_get_next_buffer()’:
lexer/c_lexer.yy.cpp:1252:44: warning: comparison between signed and unsigned integer expressions [-Wsign-compare]
  if ((int) ((yy_n_chars) + number_to_move) > YY_CURRENT_BUFFER_LVALUE->yy_buf_size) {
                                            ^
lexer/c_lexer.yy.cpp: At global scope:
lexer/c_lexer.yy.cpp:1328:17: warning: ‘void yyunput(int, char*)’ defined but not used [-Wunused-function]
     static void yyunput (int c, char * yy_bp )
                 ^

if [[ ! -f $REPO/bin/c_lexer ]]; then
    log_msg "No executable build"
    exit 0;
fi

log_msg "########################################################"
zl6114 : ########################################################
log_msg "## Executing"
zl6114 : ## Executing

log_msg "Generating input"
zl6114 : Generating input
echo -e 'int x;\n# 5 "stdio.h"\nint y;' > $LOGDIR/in.c
cat $LOGDIR/in.c
int x;
# 5 "stdio.h"
int y;

log_msg "Running lexer"
zl6114 : Running lexer
cat $LOGDIR/in.c | (cd $REPO && bin/c_lexer) > $LOGDIR/out.json

log_msg "Checking JSON formatting"
zl6114 : Checking JSON formatting
cp scripts/cw1-soft-json.py $LOGDIR/c1-soft-json.py
cat $LOGDIR/out.json | python $LOGDIR/c1-soft-json.py > $LOGDIR/out-pretty.json

Doing some basic checks.
List is terminated with empty token (which is fine). Removing empty token.
Warning: unknown key 'column'
Warning: unknown key 'streamline'
Warning: unknown key 'column'
Warning: unknown key 'streamline'
Warning: unknown key 'column'
Warning: unknown key 'streamline'
Warning: unknown key 'column'
Warning: unknown key 'streamline'
Warning: unknown key 'column'
Warning: unknown key 'streamline'
Warning: unknown key 'column'
Warning: unknown key 'streamline'

Finished checks.
zl6114 : Test Complete
